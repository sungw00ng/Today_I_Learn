# 제 1정규형(1NF)
- 주식별자에 해당하는 모든 값이 unique해야한다.
- 각 속성의 값은 원자값이어야하며, 중복되는 속성값이나 다중값을 제거해야한다.

<br>

## 제 1정규형 위배 테이블(X)

| 학생ID | 이름  | 수강과목       |
| ---- | --- | ---------- |
| 1001 | 김철수 | 수학, 과학     |
| 1002 | 이영희 | 영어         |
| 1003 | 박민수 | 국어, 영어, 수학 |

- `수강과목` 필드가 여러 개의 값을 쉼표로 구분하여 저장하고 있다.
- 따라서 원자값이 아니므로, 제 1정규형을 만족하지 않는다.

<br>

## 제 1정규형 만족 테이블(O)
  | 학생ID | 이름  | 수강과목 |
| ---- | --- | ---- |
| 1001 | 김철수 | 수학   |
| 1001 | 김철수 | 과학   |
| 1002 | 이영희 | 영어   |
| 1003 | 박민수 | 국어   |
| 1003 | 박민수 | 영어   |
| 1003 | 박민수 | 수학   |

- 각 필드는 원자값은 원자값만 포함되어있다.
- 중복되는 학생 정보는 있을 수 있으나, 각각의 `수강과목`에 대해 개별 행으로 분리하였다.
- 따라서, 제 1정규형을 만족한다.

<br><br>

# 제 2정규형(2NF)
- 부분 함수 종속(partial dependency)을 제거하는 것이다.
- 부분 키에 종속되는 Non-primary key attribute가 없어야한다,
- 복합 기본키가 있는 경우를 주의하며, 모든 속성이 전체 기본키에 종속되어야 한다.

<br>

## 제 2정규형 위배 테이블(X)
| 학생ID | 과목 | 교수이름 |
| ---- | -- | ---- |
| 1001 | 수학 | 김교수  |
| 1001 | 과학 | 이교수  |
| 1002 | 수학 | 김교수  |
| 1002 | 영어 | 박교수  |

- `교수이름`은 과목에만 의존하고, `학생ID`에는 의존하지 않는다.
- 따라서, 부분 함수 종속이 발생하여 제 2정규형을 위배한다.

<br>

## 제 2정규형 만족 테이블(O)
#### 학생-과목 테이블
| 학생ID | 과목 |
| ---- | -- |
| 1001 | 수학 |
| 1001 | 과학 |
| 1002 | 수학 |
| 1002 | 영어 |

#### 과목-교수 테이블
| 과목 | 교수이름 |
| -- | ---- |
| 수학 | 김교수  |
| 과학 | 이교수  |
| 영어 | 박교수  |

- `교수이름`은 과목에만 종속되어 있으므로 별도의 테이블로 분리한다.
- 이제 두 테이블 모두 복합키의 부분 종속을 제거했으므로 제 2정규형을 만족한다.

<br><br>

# 제 3정규형(3NF)
- 모든 Non-primary key attribute가 기본키에만 종속적이고,
- 다른 Non-primary key attribute에 종속되어서는 안된다. (이행적 종속 제거)
> 이행적 함수 종속(Transitive Dependency) 제거

<br>

## 제 3정규형 위배 테이블(X)
| 학번   | 학과ID | 학과이름   |
| ---- | ---- | ------ |
| 1001 | C01  | 컴퓨터공학과 |
| 1002 | C02  | 기계공학과  |
| 1003 | C01  | 컴퓨터공학과 |

- `학과이름`이 학과ID에만 종속되고, `학과ID`는 학번에 종속되므로,
- 이행적 함수 종속이 발생하여, 제 3정규형을 위배한다.

<br>

## 제 3정규형 만족 테이블(O)
#### 학생 테이블
| 학번   | 학과ID |
| ---- | ---- |
| 1001 | C01  |
| 1002 | C02  |
| 1003 | C01  |

### 학과 테이블
| 학과ID | 학과이름   |
| ---- | ------ |
| C01  | 컴퓨터공학과 |
| C02  | 기계공학과  |

- `학과 이름`은 학과ID에만 종속되고, 학번과는 이행적 종속 관계가 사라진다.
- 따라서, 제 3정규형을 만족한다.

<br><br>

## 보이스-코드 정규형(BCNF)
- 모든 결정키가 candidate key여야 한다는 조건을 추가적으로 요구한다.
- 모든 함수 X->Y에서, X는 반드시 후보키여야 한다.
> *결정자(Determinant): 어떤 속성이 다른 속성을 함수적으로 결정하는 경우,
> 그 결정하는 속성을 *결정자라고 한다.
> 후보키(Candidate Key): 유일하게 레코드를 식별할 수 있는 속성이다.

<br>

## 보이스-코드 정규형을 위배하는 테이블(X)
| 학생ID | 과목 | 강의실  |
| ---- | -- | ---- |
| 1001 | 수학 | A101 |
| 1002 | 수학 | A101 |
| 1003 | 과학 | B202 |

- 함수 종속 시, (학생ID,과목)->강의실은 합당한 기본키에 의한 종속이므로 만족한다.
- 하지만, 과목->강의실도 성립하는데, 이때 `과목`이 결정자임에도 `과목`은 후보키가 아니다.
- 따라서, 보이스-코드 정규형을 위배한다.
- `강의실`은 기본키에 이행적 종속이 아니고, `과목`이라는 non-prime attribute에
- 직접 종속된 것은 아니므로 3NF에는 만족한다.

<br>

## 보이스-코드 정규형을 만족하는 테이블(O)
#### 과목-강의실 테이블
| 과목 | 강의실  |
| -- | ---- |
| 수학 | A101 |
| 과학 | B202 |

#### 학생-과목 테이블
| 학생ID | 과목 |
| ---- | -- |
| 1001 | 수학 |
| 1002 | 수학 |
| 1003 | 과학 |

- 이제 모든 함수 종속에서 결정자(`과목`,`학생ID+과목`)는 후보키가 된다.

<br><br>

## 정리
| 정규형      | 조건 요약                        |
| -------- | ---------------------------- |
| **1NF**  | 원자값만 허용                      |
| **2NF**  | 부분 종속 제거 (기본키 일부에만 종속 제거)    |
| **3NF**  | 이행 종속 제거 (비프라이머리 간의 종속 제거)   |
| **BCNF** | 모든 결정자가 후보키여야 함 (3NF보다 더 엄격) |
